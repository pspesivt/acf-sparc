{"Python Testing Standards":{"Testing Philosophy":"Tests aren't checkbox; sole defense vs prod failures","Coverage Metrics":{"minimum_coverage":{"overall":80,"business_logic":90,"api_endpoints":85,"utilities":70},"excluded":["__main__.py","*/migrations/*","*/tests/*"]},"Test Structure":["tests/__init__.py","tests/conftest.py","tests/unit/__init__.py","tests/unit/services/test_user_service.py","tests/unit/repositories/test_user_repository.py","tests/unit/utils/test_security.py","tests/integration/__init__.py","tests/integration/api/test_auth_endpoints.py","tests/integration/db/test_transactions.py","tests/e2e/test_user_flow.py"],"Unit Test Patterns":{"AAA Pattern":"async def test_user_registration_success(...):Arrange user_data;Act register_user;Assert id,email,name;mock_email_service.send_welcome called once","Edge Case Testing":{"params":[["","Email required"],["notanemail","Invalid email format"],["@example.com","Invalid email format"],["user@","Invalid email format"],["a*256+'@test.com'","Email too long"]],"assert":"raises ValidationError;expected_error in error"} },"Fixtures":{"db_session":"async fixture:setup/drop Base.metadata;yield AsyncSession","user":"fixture:create User commit refresh return","user_factory":"factory returns async fn to create,commit,append,return User"},"Mocking Patterns":{"mock_stripe":"fixture->patch stripe.Charge.create returns Mock{id,amount,currency,status}","test_payment_processing":"Act charge_card;Assert charge_id;mock_stripe called with amount,currency,source,idempotency_key"},"Async Testing":{"http_client":"pytest_asyncio.fixture AsyncClient","test_external_api_call":"httpx_mock.add_response;Act fetch_external_data;Assert result==[1,2,3]"},"Integration Test Patterns":{"test_user_registration_flow":"POST /api/v1/auth/register->201;select User by email->exists;POST /api/v1/auth/login->200;access_token in resp"},"Performance Testing":"bulk_create 100 users;assert len=100;duration<1s","Test Utilities":{"assert_datetime_recent":"assert now- dt < max_age_seconds","assert_valid_uuid":"UUID(str(value)) or fail","UserBuilder":"with_email,inactive,build->User"},"Coverage Configuration":{"pytest.ini":{"testpaths":["tests"],"asyncio_mode":"auto","minversion":"8.0","addopts":["-xvs","--strict-markers","--cov=src","--cov-report=term-missing","--cov-report=html","--cov-fail-under=80"],"markers":["slow","integration","performance"]}},"Common Test Failures":{"Garbage Tests":["test_user_model","test_get_all_users","test_password_uses_bcrypt"],"Actual Tests":["test_duplicate_email_rejected","test_list_active_users","test_password_hash_verifiable"]},"Test Execution":["uv run pytest","uv run pytest --cov","uv run pytest -m not slow","uv run pytest -m integration","uv run pytest -n auto","uv run pytest -xvs --pdb","uv run pytest --cov --cov-report=html","open htmlcov/index.html"],"Reality":{"criteria":["fail on code break","fast<5s","deterministic","document behavior","cover edge cases"],"metric":"tests that would have caught last prod bug"}}}